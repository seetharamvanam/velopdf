.merge-board { display:flex; justify-content:center; align-items:center; padding:32px 0 }
.merge-board-inner { width:100%; max-width:920px }

.dropzone { border-radius:14px; border: 2px dashed var(--muted); padding:28px; display:flex; align-items:center; justify-content:center; min-height:220px; background: linear-gradient(180deg, rgba(255,255,255,0.01), transparent); transition: padding .18s var(--ease), max-height .18s var(--ease); }

/* when files are present, allow the dropzone to expand and wrap the file list */
.dropzone.has-files { align-items:flex-start; justify-content:flex-start; padding:18px; min-height:140px; max-height:420px; overflow:auto; position:relative }
.dropzone.has-files::before { content: ''; position: absolute; inset: 0; border-radius: 14px; pointer-events: none; background: linear-gradient(180deg, rgba(124,58,237,0.02), rgba(6,182,212,0.01)); mix-blend-mode: overlay; opacity: 0.6; animation: dropPulse 6s linear infinite }
@keyframes dropPulse{ 0%{ opacity:0.45 } 50%{ opacity:0.7 } 100%{ opacity:0.45 } }
@media (prefers-reduced-motion: reduce){ .dropzone.has-files::before { animation: none } }


.drop-hint { text-align:center }
.drop-hint .h1 { font-size:1.15rem; margin:0 0 6px }
.drop-hint .muted { opacity:0.8; margin:0 0 12px }
.drop-hint .upload-input { display:block; margin:0 auto }

.files-area { display:flex; flex-direction:column; gap:12px; align-items:center }
.files-list { display:flex; gap:12px; overflow:auto; padding:6px 10px; flex-wrap:wrap; align-items:flex-start }
.file-card { display:flex; align-items:center; gap:12px; min-width:200px; background:var(--surface); border-radius:10px; padding:12px; box-shadow:0 6px 18px rgba(0,0,0,0.08); transition: transform .18s var(--ease), box-shadow .18s var(--ease); cursor:grab }
.file-card:active { cursor:grabbing }
.file-card:hover { transform: translateY(-8px) scale(1.01); box-shadow:0 22px 44px rgba(0,0,0,0.16) }
.file-card.added { animation: popIn .36s cubic-bezier(.2,.9,.26,1) }
@keyframes popIn{ 0%{ transform: translateY(6px) scale(.98); opacity:0 } 60%{ transform: translateY(-6px) scale(1.02); opacity:1 } 100%{ transform: translateY(0) scale(1) }}
@media (prefers-reduced-motion: reduce){ .file-card.added { animation: none } }

.file-thumb { position: relative; width:56px; height:72px; background: linear-gradient(180deg, rgba(255,255,255,0.92), rgba(250,250,250,0.96)); border-radius:8px; display:flex; align-items:center; justify-content:center; font-weight:700; color:#444; overflow:hidden; padding:6px; box-sizing:border-box }
[data-theme="dark"] .file-thumb { background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02)); padding:6px; }
.file-thumb-img { display:block; width:100%; height:100%; object-fit:cover; background:white; border-radius:3px; box-shadow: 0 4px 10px rgba(2,6,23,0.35) }

.order-badge { position: absolute; top: 8px; left: 8px; background: linear-gradient(90deg,var(--accent),var(--accent-2)); color: #fff; padding: 2px 6px; border-radius: 8px; font-weight: 700; font-size: .75rem; box-shadow: 0 6px 14px rgba(2,6,23,0.25) }

.file-name { font-weight:600; display:block; max-width:140px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; font-size: .95rem }

.controls.fixed { position: fixed; bottom: 18px; left: 50%; transform: translateX(-50%); z-index: 80; background: var(--surface); padding: 8px 12px; border-radius: 10px; box-shadow: 0 14px 40px rgba(2,6,23,0.45); }
@media (max-width: 767px) { .controls.fixed { position: static; transform: none; box-shadow: none; } }
.thumb-placeholder { font-weight:700; color:#666 }
.thumb-placeholder .thumb-spinner { width:28px; height:28px; border-radius:50%; border:3px solid rgba(0,0,0,0.08); border-top-color: rgba(0,0,0,0.38); animation: spin 900ms linear infinite; margin: 0 auto }
.thumb-placeholder-label { font-size:0.8rem; color:var(--muted); text-align:center; margin-top:6px }
.thumb-error { display:flex; flex-direction:column; align-items:center; gap:6px; padding:8px; color:var(--danger); }
.thumb-error-msg { font-size:1.1rem }
.thumb-error-text { font-size:0.85rem; color:var(--muted) }

@keyframes spin { to { transform: rotate(360deg) } }

.file-meta { display:flex; flex-direction:column; align-items:flex-start }
.file-name { font-weight:600; display:block; max-width:160px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; font-size: .95rem }
.file-size { color:var(--muted); font-size:.85rem }



@media (prefers-color-scheme: light) {
  .file-thumb { background: linear-gradient(180deg,#fff,#fbfbfb) }
  .thumb-preview-btn { background: rgba(16,24,40,0.04) }
}


/* Hover preview */
.file-card { position: relative }
.preview { position: absolute; left: 50%; transform: translateX(-50%) translateY(-8px); bottom: 110%; width: 240px; background: var(--surface); border-radius: 8px; box-shadow: 0 12px 30px rgba(0,0,0,0.2); overflow: hidden; opacity: 0; pointer-events: none; transition: transform .12s ease, opacity .12s ease }
.file-card:hover .preview, .file-card:focus-within .preview { opacity: 1; transform: translateX(-50%) translateY(-12px) }
.preview img { display:block; width:100%; height:auto; object-fit:cover }
.preview-placeholder { padding: 28px; color: var(--muted); text-align:center }

/* full-screen overlay + large centered preview popup */
.pdf-preview-overlay { position: fixed; inset: 0; z-index: 60; display: flex; align-items: center; justify-content: center }
.pdf-preview-backdrop { position: absolute; inset: 0; background: rgba(0,0,0,0.52); backdrop-filter: blur(2px) }
.pdf-preview-popup { position: relative; z-index: 2; width: min(86vw, 1200px); max-height: 90vh; background: var(--surface); border-radius: 12px; box-shadow: 0 28px 80px rgba(0,0,0,0.55); overflow: hidden; display: flex; flex-direction: column }
.pdf-preview-header { display:flex; gap:8px; align-items:center; padding:12px 16px; border-bottom: 1px solid rgba(255,255,255,0.03) }
.pdf-preview-title { font-weight:700; font-size:1.05rem }
.pdf-preview-meta { margin-left:auto; color:var(--muted); font-size: .95rem }
.pdf-preview-body { padding:16px; overflow:auto; -webkit-overflow-scrolling: touch; display:flex; flex-direction:column; align-items:center; gap:16px }
.preview-page { display:block; max-width:100%; height:auto; border-radius:6px; box-shadow: 0 18px 36px rgba(2,6,23,0.4) }

@media (max-width: 767px) {
  .pdf-preview-popup { width: 95vw; border-radius: 8px }
  .preview-page { box-shadow: 0 8px 18px rgba(2,6,23,0.35) }
}

/* small page-count badge */
.file-size { position: relative; padding: 6px 8px; background: rgba(0,0,0,0.04); border-radius: 12px; font-size: .85rem }

.file-actions { margin-left:auto; display:flex; gap:8px }
.btn.small { padding:6px 8px; font-size:.85rem; background: rgba(255,255,255,0.03); color: var(--text); border: 1px solid rgba(255,255,255,0.04); border-radius:8px }
.btn.small:hover, .btn.small:focus { transform: translateY(-2px); box-shadow:0 10px 24px rgba(0,0,0,0.08) }
.btn.danger { background:transparent; color:var(--danger); border:1px solid rgba(255,0,0,0.06) }

/* preview close button and header contrast */
.pdf-preview-header .btn.small { background: rgba(0,0,0,0.06); color: var(--text); border: none; border-radius:8px; padding:6px 10px }
[data-theme="dark"] .pdf-preview-header .btn.small { background: rgba(255,255,255,0.06); color: var(--text) }


.controls { display:flex; align-items:center; gap:16px }
.note { color:var(--muted); font-size:.9rem }
.actions { display:flex; gap:8px }

@media (max-width: 767px) {
  /* Horizontal single-row scroll on small screens to preserve merge order */
  .files-list { flex-wrap: nowrap; flex-direction: row; overflow-x: auto; -webkit-overflow-scrolling: touch; padding: 8px 12px; gap: 12px; position: relative }
  .file-card { min-width: 160px; width: auto }

  /* subtle fade overlays to hint at horizontal scrollability */
  .files-list::before, .files-list::after { content: ''; position: absolute; top: 0; bottom: 0; width: 28px; z-index: 6; pointer-events: none }
  .files-list::before { left: 0; background: linear-gradient(90deg, var(--surface), rgba(0,0,0,0)) }
  .files-list::after { right: 0; background: linear-gradient(270deg, var(--surface), rgba(0,0,0,0)) }

  /* make internal dropzone spacing more compact on phones */
  .dropzone.has-files { padding: 12px; min-height: 120px }

  /* ensure fixed controls fall into normal flow on small screens */
  .controls.fixed { position: static; transform: none; box-shadow: none; margin-top: 8px }
}
